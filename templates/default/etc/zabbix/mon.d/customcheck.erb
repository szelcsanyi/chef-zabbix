#!/bin/bash

###
# Generated by Chef for [<%= node[:fqdn] %>]
# Environment: <%= node.chef_environment %>
###

# Put the following line at the end of /etc/zabbix/zabbix_agentd.conf:
# UserParameter=customcheck[*], /etc/zabbix/mon.d/basecheck $1 $2 $3 $4 $5 $6 $7 $8 $9

set -o pipefail
set -o nounset
set -o errexit

lowercase () {
        echo "$@" | tr '[:upper:]' '[:lower:]'
}

command="$(lowercase "${1:-}")"
shift

case "$command" in
<% @userparameters.each do |parameter| -%>
<% if parameter[:enabled] %>
        <%= parameter[:name] %>)
                <%= parameter[:command] %>
                ;;
<% end %>
<% end -%>
        *)
                echo "Unrecognized command $command" >&2
                exit 1
                ;;
esac


